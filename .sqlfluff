# Can see full default config at : https://docs.sqlfluff.com/en/stable/configuration.html#config 
[sqlfluff]
# verbose is an integer (0-2) indicating the level of log output
verbose = 0
# Or run 'sqlfluff dialects'
dialect = snowflake
# Comma separated list of rules to check, or None for all
rules = L001, L002, L003, L005, L006, L007, L008, L009, L010, L011, L012, L013, L014, L015, L016, L017, L018, L019, L020, L021, L022, L023, L025, L026, L027, L028, L029, L030, L032, L033, L036, L037, L038, L039, L040, L041, L042, L043, L044, L045, L046, L048, L049, L050, L051, L053, L055, L056, L057, L058, L061
# Comma separated list of rules to exclude, or None
exclude_rules = L019, L036, L039, L040, L054, L059, L060, L062
# Below controls SQLFluff output, see max_line_length for SQL output
output_line_length = 120
# Ignore inline overrides (e.g. to test if still required)
disable_noqa = False
# Comma separated list of file extensions to lint
# NB: This config will only apply in the root folder
sql_file_exts = .sql
; templater = dbt


[sqlfluff:templater:jinja]
library_path = sqlfluff_libs
apply_dbt_builtins = True

; [sqlfluff:templater:jinja:context]
; dbt_betclic_commons=dbt_betclic_commons

[sqlfluff:templater:jinja:macros]
get_payment_methods = {% macro get_payment_methods() %} [] {% endmacro %}
handle_jsons = {% macro handle_jsons(col) %} col {% endmacro %}

[sqlfluff:indentation]
indented_joins = False
template_blocks_indent = True
indented_using_on = True

# See https://docs.sqlfluff.com/en/stable/indentation.html

# Some rules can be configured directly from the config common to other rules
[sqlfluff:rules]
max_line_length = 120
comma_style = leading
allow_scalar = True
single_table_references = consistent
unquoted_identifiers_policy = all

############################ DOC of used rules ############################

[sqlfluff:rules:L001]
# No trailing spaces
# Can be fixed automatically

[sqlfluff:rules:L002]
# Use only spaces (or only tabs but not both) to indent
# Can be fixed automatically

[sqlfluff:rules:L003]
# Indentation must be consistent with previous lines.
# Can be fixed automatically

[sqlfluff:rules:L005]
# Commas should not have whitespace directly before them.
# Can be fixed automatically

[sqlfluff:rules:L006]
# Operators should be surrounded by a single whitespace.
# Can be fixed automatically

[sqlfluff:rules:L007]
# If using multiline operations, operator should be : 
operator_new_lines = after

[sqlfluff:rules:L008]
# Commas should be followed by a single whitespace unless followed by a comment.
# Can be fixed automatically

[sqlfluff:rules:L009]
# Files must end with a single trailing newline.
# Can be fixed automatically


[sqlfluff:rules:L010]
# Keywords
capitalisation_policy = lower
# Comma separated list of words to ignore for this rule
ignore_words = None
# Can be fixed automatically

[sqlfluff:rules:L011]
# Aliasing preference for tables
aliasing = explicit
# Can be fixed automatically

[sqlfluff:rules:L012]
# Aliasing preference for columns
aliasing = explicit
# Can be fixed automatically

[sqlfluff:rules:L013]
# Aliasing is mandatory when doing an operation / aggregation
allow_scalar = False 
# Not sure what allow_scalar changes

[sqlfluff:rules:L014]
# Unquoted identifiers must be lower case
extended_capitalisation_policy = lower
# Comma separated list of words to ignore for this rule
ignore_words = None
# Can be fixed automatically
# MUST CHECK HOW TO DO WHEN ACCESSING JSON OBJECTS

[sqlfluff:rules:L015]
# DISTINCT is not a function and applies to all element in SELECT statement : should never be used with parenthesis
# Can be fixed automatically

[sqlfluff:rules:L016]
# Line length
ignore_comment_lines = True
ignore_comment_clauses = False
# Can be fixed automatically

[sqlfluff:rules:L017]
# Function name must immediately followed by parenthesis
# Can be fixed automatically

[sqlfluff:rules:L018]
# WITH clause closing bracket should be aligned with WITH keyword.
# Can be fixed automatically

[sqlfluff:rules:L019]
# Leading/Trailing comma enforcement.
comma_style = leading
# Can be fixed automatically

[sqlfluff:rules:L020]
# Table aliases should be unique within each clause.

[sqlfluff:rules:L021]
# DISTINCT and GROUP BY should not be used in same SELECT statement

[sqlfluff:rules:L022]
# A blank line must be added after a CTE 
# Can be fixed automatically

[sqlfluff:rules:L023]
# Single whitespace expected after AS in WITH clause.
# Can be fixed automatically

[sqlfluff:rules:L025]
# Tables should not be aliased if that alias is not used.
# Can be fixed automatically

[sqlfluff:rules:L026]
# References must be in FROM clause

[sqlfluff:rules:L027]
# References must be applied if there is more than one aliased table in SELECT statement

[sqlfluff:rules:L028]
# References must be consistently used in statement with 1 table

[sqlfluff:rules:L029]
# Keywords should not be used as identifiers.
unquoted_identifiers_policy = all
quoted_identifiers_policy = none
# Comma separated list of words to ignore for this rule
ignore_words = data, date

[sqlfluff:rules:L030]
# Function names
capitalisation_policy = lower
# Comma separated list of words to ignore for this rule
ignore_words = None
# Can be fixed automatically

[sqlfluff:rules:L032]
# Never use USING but use ON and specify

[sqlfluff:rules:L033]
# UNION [DISTINCT|ALL] is preferred over just UNION.

[sqlfluff:rules:L036]
# Select targets should be on a new line unless there is only one select target.
# If only one, it must be on the same line as select, is that wanted ? 
# Can be fixed automatically

[sqlfluff:rules:L037]
# Ambiguous ordering directions for columns in order by clause.
# Can be fixed automatically

[sqlfluff:rules:L038]
# Trailing commas
select_clause_trailing_comma = forbid
# Can be fixed automatically

[sqlfluff:rules:L039]
# Always remove unnecessary whites
# Can be fixed automatically

[sqlfluff:rules:L040]
# Null & Boolean Literals
capitalisation_policy = lower
# Comma separated list of words to ignore for this rule
ignore_words = None
# Can be fixed automatically

[sqlfluff:rules:L041]
# SELECT modifiers (e.g. DISTINCT) must be on the same line as SELECT.
# Can be fixed automatically

[sqlfluff:rules:L042]
# Join/From clauses should not contain subqueries. Use CTEs instead.
forbid_subquery_in = both

[sqlfluff:rules:L043]
# Unnecessary CASE statement.
# Usually, replaces with COALESCE (more efficient)
# Can be fixed automatically

[sqlfluff:rules:L044]
# Never use * in SELECT 
# NOTE : this does not raise error if * is used in CTEs

[sqlfluff:rules:L045]
# Query defines a CTE (common-table expression) but does not use it.

[sqlfluff:rules:L046]
# Jinja tags should have a single whitespace on either side.

[sqlfluff:rules:L048]
# Quoted literals should be surrounded by a single whitespace.
# Can be fixed automatically

[sqlfluff:rules:L049]
# Comparisons with NULL should use “IS” or “IS NOT”.
# Can be fixed automatically

[sqlfluff:rules:L050]
# Files must not begin with newlines or whitespace.
# Can be fixed automatically

[sqlfluff:rules:L051]
# INNER JOIN must be fully qualified. JOIN == INNER JOIN
# Can be fixed automatically

[sqlfluff:rules:L053]
# Top-level statements should not be wrapped in brackets.
# Can be fixed automatically

[sqlfluff:rules:L054]
# GROUP BY/ORDER BY column references
group_by_and_order_by_style = consistent

[sqlfluff:rules:L055]
# Use LEFT JOIN instead of RIGHT JOIN.

[sqlfluff:rules:L056]
# The SP_ prefix is used to identify system procedures and 
#can adversely affect performance of the user-defined stored procedure. 
# It can also break system procedures if there is a naming conflict.

[sqlfluff:rules:L057]
# Never use special characters in identifiers
unquoted_identifiers_policy = all
quoted_identifiers_policy = all
allow_space_in_identifier = False
additional_allowed_characters = ""

[sqlfluff:rules:L058]
# Nested CASE statement in ELSE clause could be flattened.
# Can be fixed automatically

[sqlfluff:rules:L059]
# Policy on quoted and unquoted identifiers
prefer_quoted_identifiers = False

[sqlfluff:rules:L060]
# Use COALESCE instead of IFNULL or NVL.
# Can be fixed automatically

[sqlfluff:rules:L061]
# Use != instead of <> for “not equal to” comparisons.
# Can be fixed automatically

[sqlfluff:rules:L062]
# Comma separated list of blocked words that should not be used
blocked_words = None